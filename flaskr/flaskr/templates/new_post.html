{% extends 'new_index.html' %}

{% block header %}
  <h1>{% block title %}帖子管理{% endblock %}</h1>
{% endblock %}

{% block content %}
<!--<link rel="stylesheet" href="../static/res/layui/css/layui.css" media="all">-->
  <div class="layui-container">
  <form action="" method="post" enctype="multipart/form-data">
    <input type="text" id="title" name="title" required  lay-verify="required" placeholder="请输入帖子ID" autocomplete="off" class="layui-input" value="{{ request.form['title'] }}" required>
     <div class="fly-column-right layui-hide-xs">
      <button class="layui-btn" lay-filter="*" lay-submit>搜索帖子</button>
     </div></form>
  </div>

<div class="layui-container">
<table class="layui-table">
  <thead>
    <tr>
      <th width="20" style="text-align:center">帖子ID</th>
      <th width="100" style="text-align:center">用户昵称</th>
      <th width="100" style="text-align:center">发帖题目</th>
      <th width="100" style="text-align:center">发帖内容</th>
      <th width="100" style="text-align:center">置顶状态</th>
        <th width="100" style="text-align:center">置顶操作</th>
      <th width="1" style="text-align:center">删除</th>
    </tr> 
  </thead>
  {% for post in posts %}
  <tbody>
    <tr>
      <td style="text-align:center">{{ post['id'] }}</td>
      <td style="text-align:center">{{ post['nickname'] }}</td>   
      <td style="text-align:center">{{ post['title'] }}</td>
      <td style="text-align:center">{{ post['created'] }}</td>
        {% if post['is_top'] == 1 %}
            <td style="text-align:center">置顶</td>
            <td style="text-align:center">
            <form action="{{ url_for('admin.TopPost', id=[post['id'],0]) }}" method="post">
                <button class="layui-btn layui-btn-normal layui-btn-xs"  lay-filter="*" lay-submit type="submit">解除置顶</button>
            </form>
            </td>
        {% else %}
            <td style="text-align:center">未被置顶</td>
            <td style="text-align:center">
            <form action="{{ url_for('admin.TopPost', id=[post['id'],1]) }}" method="post">
                <button class="layui-btn layui-btn-warm layui-btn-xs"  lay-filter="*" lay-submit type="submit">置顶</button>
            </form>
            </td>
        {% endif %}
      <td style="text-align:center">
          <form action="{{ url_for('admin.DeletePost', id=post['id']) }}" method="post">
              <button class="layui-btn layui-btn-danger layui-btn-xs"  lay-filter="*" lay-submit type="submit">删除帖子</button>
          </form>
        <!--<button class="layui-btn layui-btn-sm layui-btn-danger" href="{{ url_for('admin.DeletePost', id=post['id']) }}">
          <i class="layui-icon">&#xe640;</i>
        </button>-->
      </td>
    </tr>
  </tbody>
  {% endfor %}
</table>
</div>

{% endblock %}

